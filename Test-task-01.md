# Тестовое задание.

# API (простое)

## Бизнес модель:
В процессе медицинского обследования или лечения, пациенту может быть выписано назначение. Назначение выписывается врачом и оформляется соответствующим документом. Данный документ содержит в себе информацию о пациенте, враче, диагнозе, и может содержать информацию о учреждении, в которое следует обратиться пациенту.
Так как медицинских учреждений много, предполагается, что будет создана информационная система, агрегирующая все выписанные назначения (далее core.fhir.uz). Любая организация, посредством своей информационной системы обратившись в core.fhir.uz, может получить эти назначения для дальнейшей обработки.

## Задание:
- Необходимо создать сервис для создания, хранения и выдачи назначений пациенту.
- Назначения должны храниться в базе данных (любая СУБД).
- Сервис должен предоставлять API, работающее поверх HTTP в формате JSON.
- Создание пользовательского интерфейса не требуется.
- Авторизация запросов не требуется.

## Минимальные требования:
- Достаточно двух методов: получение назначения, создание назначения.
- Валидация ресурса в соответствии со схемой (ресурс «Appointment»), описание приведено в прилагаемом файле (JSON SCHEMA).

## Подробнее:
- Вы создаёте информационную систему core.fhir.uz, позволяющую собирать направления и выдавать информацию по ним.
- Направление представлено информационным ресурсом Назначение (Appointment). 
- Вам не надо создавать связанные ресурсы, такие как Пациент (Patinet), Врач (Practitioner), Организация (Organization); в ресурсе  Appointment содержатся только ссылки на них. Идентификаторы этих ресурсов могут быть любыми, единственное условие (кроме уникальности в текущем пространтсве имен) - соответствие паттерну, указанному в JSON SCHEMA.
- Ресурс  Appointment, с которым вы работаете состоит только из идентификаторов и ссылок. Формат этих идентификаторов и ссылок указан в json schema файле.
- Вам необходимо создать базу данных и информационную систему, предоставляющую API.
- Минимально необходимо создать два метода:  получение назначения, создание назначения.
- Получение назначения: метод должен возвращать ресурс  Appointment, если он имеется. Достаточно реализовать поиск по Appointment.id
- Создание назначения: метод должен создавать Appointment, если в базе не имеется записи с аналогичными  Appointment.identifier.system и Appointment.identifier.value (то есть исключить создание дублирования)

## Технические детали:
- Тело ответа на успешный запрос должно иметь атрибут «data». Атрибут «data» может содержать один объект Appointment (при единичном возврате) или список объектов Appointment (при множественном возврате). Атрибут «data» не должен быть пустым значением или пустым списком.
- Тело ответа на не успешный запрос должно иметь атрибут «error». Содержание error сформировать самостоятельно.
- Тело ответа не может одновременно содержать атрибуты «data» и «error».
- Формат данных в теле запроса/ответа только JSON (MIME Type: application/json) или текст (MIME Type: text/plain).

## Методы:

### Получение назначения (GET):
- Запрос: должен содержать идентификатор назначения, присвоенный вашей системой (Appointment.id).
- Ответ при успехе: возвращается одно назначение.

### Создание назначения (POST):
- Запрос: должен содержать все требуемые поля, за исключением id. Если запрос содержит Appointment.id, оно должно игнорироваться и его значение в ответе должно быть заменено.
- Ответ при успехе: возвращается одно назначение, с присвоением идентификатора от сервера (Appointment.id).


## Коды статусов ответов:
- 200 OK при успешном ответе на запрос «получение назначения».
- 201 Created при успешном ответа на запрос «создание назначения»
- 404 Not found  если идентификатор при запросе «получение назначения» не найден.
- 422 Unprocessable Entity если запрос «создание назначения» содержит уже существующий  Appointment.identifier.system и Appointment.identifier.value.
- Остальные коды статусов выбрать самостоятельно.


## Будет плюсом:
- наличие unit-тестов.
- описание архитектуры сервиса в виде текста и/или диаграмм.
- предоставление документации к API в формате OpenAPI Specification v3.0.
- контейнеризация проекта (наличие возможности поднять проект с помощью команды docker-compose up)
- реализация поиска направлений по другим атрибутам. Например, по идентификаторам, выданными другими системами, по идентификаторам врача, пациента или организации.
- реализация дополнительных функций обновления (update) ранее созданных направлений.


## Ответ:
- Результат выполненной работы в виде ZIP архива необходимо отправить на e-mail: e.goryunova92@gmail.com. Альтернативно - выслать ссылку на доступный репозиторий.
- Архив должен содержать все необходимые файлы приложения, в частности, исходный код, данные (SQL Dump или иное, если имеется), описание выполненной работы (readme.md) и данный файл с описанием задания.
- Непосредственно в самом email необходимо указать сколько времени (в часах) заняло выполнение данного задания.

## Если что-то не понятно:
При возникновении каких либо вопросов - решение принять самостоятельно, в readme.md  явно указать эти вопросы и принятые по ним решения.


## Что будет оцениваться
- Выполнение задач, поставленных в задании
- Качество кода (читаемость, нейминг, декларативность, Code style)
- Документирование реализованного решения
- Выполнение раздела "Будет плюсом"
- Субъективная оценка потраченного времени




